<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internal Access - Node 7</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .data-row:hover { background-color: rgba(59, 130, 246, 0.1); border-left: 2px solid #3b82f6; }
        .hidden-row { display: none; }
        .terminal-text { font-family: 'Consolas', 'Monaco', monospace; }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: #1e293b; }
    </style>
</head>
<body class="bg-[#05070a] text-slate-400 terminal-text text-xs selection:bg-blue-500/30">

    <div class="flex h-screen flex-col">
        <div class="bg-[#0f1117] border-b border-white/5 p-4 flex justify-between items-center px-10">
            <div class="flex items-center gap-6">
                <h1 class="text-blue-500 font-bold tracking-tighter text-lg">DATALEAK_v2.0.1</h1>
                <div class="flex gap-2 items-center">
                    <span class="w-2 h-2 bg-red-500 rounded-full animate-ping"></span>
                    <span class="text-red-500 text-[10px]">LIVE CONNECTION</span>
                </div>
            </div>
            <div class="text-slate-600">ENCRYPTION: <span class="text-slate-400">AES-256-GCM</span></div>
        </div>

        <div class="flex-1 flex overflow-hidden">
            <main class="flex-1 p-8 overflow-y-auto">
                <div class="max-w-5xl mx-auto">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-white text-xl font-bold">Infiltrated Accounts</h2>
                        <button onclick="revealNextBatch()" id="revealBtn" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-2 rounded font-bold transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                            NEXT PAGE
                        </button>
                    </div>

                    <div class="bg-[#0f1117] border border-white/10 rounded overflow-hidden">
                        <table class="w-full text-left">
                            <thead class="bg-white/5 text-slate-500 uppercase text-[10px]">
                                <tr>
                                    <th class="p-4">Staff Member</th>
                                    <th class="p-4">Relay Email (mail.gw)</th>
                                    <th class="p-4">Department</th>
                                    <th class="p-4 text-right">Access Key</th>
                                </tr>
                            </thead>
                            <tbody id="dataTable">
                                </tbody>
                        </table>
                        <div id="loading" class="p-20 text-center">
                            <div class="inline-block animate-spin border-2 border-blue-500 border-t-transparent w-8 h-8 rounded-full mb-2"></div>
                            <p class="animate-pulse">Accessing Remote Server...</p>
                        </div>
                    </div>
                </div>
            </main>

            <aside class="w-80 bg-black border-l border-white/5 p-4 flex flex-col">
                <h3 class="text-white font-bold mb-4 border-b border-white/10 pb-2">SYSTEM CONSOLE</h3>
                <div id="consoleBody" class="flex-1 overflow-y-auto space-y-1 text-[10px] leading-tight">
                    </div>
            </aside>
        </div>
    </div>

    <script>
        const API_URL = 'https://api.mail.gw';
        const firstNames = ["James", "Sarah", "Robert", "Emily", "Michael", "Linda", "David", "Jessica", "Thomas", "Karen", "Mark", "Chloe"];
        const lastNames = ["Miller", "Wilson", "Anderson", "Taylor", "Moore", "Jackson", "Martin", "Lee", "Perez", "White", "Harris", "Clark"];
        const depts = ["Internal-Sec", "Finance", "DevOps", "HR-Database", "Legal-Review"];

        async function init() {
            logToConsole("Initializing secure tunnel...");
            try {
                const domRes = await fetch(`${API_URL}/domains`);
                const domData = await domRes.json();
                const domain = domData['hydra:member'][0].domain;
                logToConsole(`Target domain identified: ${domain}`);

                // Generate 40 users total (Initial 10 visible, others hidden)
                for (let i = 0; i < 40; i++) {
                    const fName = firstNames[Math.floor(Math.random() * firstNames.length)];
                    const lName = lastNames[Math.floor(Math.random() * lastNames.length)];
                    const dept = depts[Math.floor(Math.random() * depts.length)];
                    const email = `${fName[0].toLowerCase()}.${lName.toLowerCase()}${Math.floor(Math.random()*999)}@${domain}`;
                    
                    // Register them
                    await fetch(`${API_URL}/accounts`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ address: email, password: "SecretPassword123!" })
                    });

                    addTableRow(`${fName} ${lName}`, email, dept, i >= 10);
                    if (i % 5 === 0) logToConsole(`Extracted packet [${i+1}/40]...`);
                }
                document.getElementById('loading').classList.add('hidden');
                logToConsole("Infiltration complete. Records ready.");
            } catch (e) {
                logToConsole("ERROR: API rate limit reached. Retrying tunnel...", "text-red-500");
            }
        }

        function addTableRow(name, email, dept, isHidden) {
            const table = document.getElementById('dataTable');
            const row = document.createElement('tr');
            row.className = `data-row border-b border-white/5 ${isHidden ? 'hidden-row' : ''}`;
            row.innerHTML = `
                <td class="p-4 text-white font-medium">${name}</td>
                <td class="p-4 text-blue-400 font-mono">${email}</td>
                <td class="p-4"><span class="bg-white/5 border border-white/10 px-2 py-0.5 rounded text-slate-500">${dept}</span></td>
                <td class="p-4 text-right"><button class="text-emerald-500 text-[9px] border border-emerald-500/30 px-2 py-1 rounded">DECRYPTED</button></td>
            `;
            table.appendChild(row);
        }

        function revealNextBatch() {
            const btn = document.getElementById('revealBtn');
            const hidden = Array.from(document.querySelectorAll('.hidden-row'));
            
            if (hidden.length === 0) {
                logToConsole("No more records in current buffer.", "text-orange-500");
                return;
            }

            btn.innerText = "BYPASSING...";
            btn.disabled = true;
            logToConsole("Requesting next data page from Node 7...");

            setTimeout(() => {
                for(let i = 0; i < 10 && i < hidden.length; i++) {
                    hidden[i].classList.remove('hidden-row');
                    hidden[i].classList.add('bg-blue-500/10');
                }
                btn.innerText = "NEXT PAGE";
                btn.disabled = false;
                logToConsole(`Success: 10 records injected into view.`);
            }, 800);
        }

        function logToConsole(msg, colorClass = "text-slate-500") {
            const consoleBody = document.getElementById('consoleBody');
            const entry = document.createElement('div');
            entry.className = colorClass;
            entry.innerHTML = `> [${new Date().toLocaleTimeString()}] ${msg}`;
            consoleBody.appendChild(entry);
            consoleBody.scrollTop = consoleBody.scrollHeight;
        }

        init();
    </script>
</body>
</html>
